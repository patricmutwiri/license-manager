<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <title>License Manager - Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>
    <nav>
        <div class="container">
            <a href="/" class="logo">
                <span class="logo-icon">LM</span>
                License Manager
            </a>
            <div class="nav-links">
                <a href="/">Dashboard</a>
                <a th:if="${#authentication.name != 'anonymousUser'}" href="/logout" class="btn btn-secondary"
                    style="padding: 0.5rem 1rem; font-size: 0.8rem;">Logout</a>
                <a th:if="${#authentication.name == 'anonymousUser'}" href="/login" class="btn btn-primary"
                    style="padding: 0.5rem 1rem; font-size: 0.8rem;">Login</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <header class="page-header">
            <h1>Command Center</h1>
            <p>Scale your software distribution and manage licensing infrastructure with precision.</p>
        </header>

        <section class="grid" style="margin-bottom: 3rem;">
            <div class="stats-card glass-card">
                <label>Organizations</label>
                <div style="font-size: 2.5rem; font-weight: 700; margin-top: 0.5rem;" th:text="${organizations.size()}">
                    0</div>
            </div>
            <div class="stats-card glass-card">
                <label>Active Licenses</label>
                <div style="font-size: 2.5rem; font-weight: 700; margin-top: 0.5rem;">âˆž</div>
            </div>
            <div class="stats-card glass-card">
                <label>API Status</label>
                <div
                    style="font-size: 2.5rem; font-weight: 700; margin-top: 0.5rem; color: var(--success); display: flex; align-items: center; gap: 0.75rem;">
                    Healthy
                    <span
                        style="display: inline-block; width: 10px; height: 10px; background: var(--success); border-radius: 50%; box-shadow: 0 0 12px var(--success);"></span>
                </div>
            </div>
        </section>

        <section class="glass-card" style="margin-bottom: 4rem; padding: 3rem;">
            <div style="margin-bottom: 2.5rem;">
                <h2>Provision Organization</h2>
                <p style="color: var(--text-secondary); font-size: 0.95rem;">Create a new entity to manage software
                    distributions.</p>
            </div>
            <form th:action="@{/organizations}" method="post" class="form-grid" style="align-items: end;">
                <div class="input-group" style="margin-bottom: 0;">
                    <label for="orgName">Organization Name</label>
                    <input type="text" id="orgName" name="name" placeholder="Acme Corp" required>
                </div>
                <div class="input-group" style="margin-bottom: 0;">
                    <label for="orgDomain">Primary Domain</label>
                    <input type="text" id="orgDomain" name="domain" placeholder="acme.com" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Initialize</button>
            </form>
        </section>

        <div class="grid">
            <div th:each="org : ${organizations}" class="glass-card">
                <h3 th:text="${org.name}" style="margin-bottom: 0.5rem; font-size: 1.4rem;">Org Name</h3>
                <p th:text="${org.domain}"
                    style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 2rem;">domain.com</p>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <a th:href="@{'/licenses?orgId=' + ${org.id}}" class="btn btn-secondary">
                        View Licenses
                    </a>
                    <a th:href="@{'/licenses/generate?orgId=' + ${org.id}}" class="btn btn-primary">
                        Generate License
                    </a>
                </div>
            </div>
        </div>

        <footer>
            <p>
                Works by <a href="https://github.com/patricmutwiri" target="_blank"
                    style="color: var(--primary); text-decoration: none; font-weight: 600;">Patrick Mutwiri</a>
            </p>
        </footer>
    </main>
</body>

</html>